## Contents
1. [Установка ОС](#part-1-установка-ос)  
2. [Создание пользователя](#part-2-создание-пользователя)  
3. [Настройка сети ОС](#part-3-настройка-сети-ос)   
4. [Обновление ОС](#part-4-обновление-ос)  
5. [Использование команды  sudo](#part-5-использование-команды-sudo)  
6. [Установка и настройка службы времени](#part-6-установка-и-настройка-службы-времени)  
7. [Установка и использование текстовых редакторов](#part-7-установка-и-использование-текстовых-редакторов)  
8. [Установка и базовая настройка сервиса SSHD](#part-8-установка-и-базовая-настройка-сервиса-sshd)   
9. [Установка и использование утилит top, htop](#part-9-установка-и-использование-утилит-top-htop)   
10. [Использование утилиты fdisk](#part-10-использование-утилиты-fdisk)   
11. [Использование утилиты df](#part-11-использование-утилиты-df)    
12. [Использование утилиты du](#part-12-использование-утилиты-du)    
13. [Установка и использование утилиты ncdu](#part-13-установка-и-использование-утилиты-ncdu)    
14. [Работа с системными журналами](#part-14-работа-с-системными-журналами)     
15. [Использование планировщика заданий CRON](#part-15-использование-планировщика-заданий-cron)    

## Part1. Установка ОС

Вывод версии Ubuntu командой `cat /etc/issue`.
![Version of the Linux](src/images/version.png)

## Part 2. Создание пользователя

Создаем нового пользователя командой `useradd`.
>Используя флаг -G добалвяем пользователя в группу adm, а с помощью флага -p задаем пароль.

![Creating a user](src/images/creation_a_user.png)

Вывод всех пользоватетей командой `cat /etc/passwd`.

![Creating a user](src/images/output_all_users.png)

## Part 3. Настройка сети ОС

- Задаëм название машины user-1, используя команду `hostnamectl set-hostname user-1`.

![Setting a name](src/images/change_name.png)

-  Устанавливаем локальную временную зону.
> Команда `timedatectl set-timezone` позволяет установить временную зону из списка всех существующих временных зон. Посмотреть все временные зоны можно командой `timedatectl list`.

![Setting the local time zone](src/images/timezone.png)

- Вывод названий сетевых интерфейсов с помощью команды `ip addr`.

![Ip_addr](src/images/ip_addr.png)

>Localhost (lo) - pарезервированное доменное имя для частных IP-адресов (в диапазоне 127.0.0.1 — 127.255.255.254). Для сети, состоящей только из одного компьютера, как правило, используется всего один адрес — 127.0.0.1, который устанавливается на специальный сетевой интерфейс «внутренней петли» (англ. loopback) в сетевом протоколе TCP/IP. Использование адреса 127.0.0.1 позволяет устанавливать соединение и передавать информацию для программ-серверов, работающих на том же компьютере, что и программа-клиент.

- Используя консольную команду `dhclient -v enp0s3` получаем ip-адрес устройства от DHCP сервера.

![dhclient](src/images/change_ip_from_dhcp.png)
>DHCP (Dynamic Host Configuration Protocol) - протокол прикладного уровня модели TCP/IP, служит для назначения IP-адреса клиенту.

- Вывод внутреннего ip-адреса шлюза командой `ip route`.

![Internal_ip_address](src/images/inter_ip.png)

- Вывод внешнего ip-адреса шлюза командой `curl 'ifconfig.me'`.

![External_ip](src/images/external_ip.png)

- Задаем статичные настройки ip, gw, dns редактируя файл `/etc.netplan/00-installer-config.yaml`. 

![netplan](src/images/static_ip.png)

- Пропингуем хост 1.1.1.1.

![ping_1111](src/images/ping_1111.png)

- Пропингуем хост ya.ru.

![ping_ya_ru](src/images/ping_ya_ru.png)

## Part 4. Обновление ОС

Обновляем системные пакеты командой `sudo apt-get upgrade`

![OS_update](src/images/OS_update.png)

## Part 5. Использование команды **sudo**

Используя команду `sudo usermod st-aG sudo lavondas` даем право использовать *sudo*.

Заходим по именем созданного ранее пользователя с помощью команды `su lavondas` и меняем hostname с помощью комманды `sudo hostnamectl set-hostname lol`.

![new_hostname](src/images/new_hostname.png)

## Part 6 Установка и настройка службы времени

Время успешно настроено.

![NTP](src/images/NTP_synch.png)

## Part 7. Установка и использование текстовых редакторов 

В этом задании я решила использовать редакторы Vim, nano, mcedit. Чтобы скачать редакторы используем команду `sudo apt install name_redactor`.

### Vim

![vim_1](src/images/Vim1.png)

>Чтобы создать файл и открыть вводим команду `vim test_vim.txt`. Чтобы начать ввод текста, нажимаем на клавишу I. Входим в командный режим клавишой esc, вводим сочетание :wq чтобы сохранить и выйти из редактора.

### Nano

![nano_1](src/images/nano1.png)

>Чтобы создать файл и открыть вводим команду `vim test_nano.txt`. Чтобы сохранить файл используем сочетание ctrl+o, а чтобы выйти ctrl+x и нажимаем Enter.

### Mcedit

![mcedit_1](src/images/mcedit1.png)

>Чтобы создать файл и открыть вводим команду `vim test_mcedit.txt`. Для сохранения файла можно воспользоваться клавишей F2. Для выхода из редактора используем клавишу F10.

### Vim
![vim_2](src/images/Vim2.png)

>Для того чтобы выйти без сохранений в командной строке пишем ':q!'.

### Nano

![nano_2](src/images/nano2.png)

>Для того чтобы выйти без сохранений просто выходим при помощи ctrl+X и отказываемся сохранить изменения.

### Mcedit

![mcedit_2](src/images/mcedit2.png)

>Можно выйти при помощи F10. При выходе отказаться от изменений.

### Vim
![vim_3](src/images/Vim3.png)
![vim_4](src/images/Vim4.png)

>Для поиска и замены пишем :s/искомое_слово/заменяющее_слово. Искомое слово подсвечивается.

![vim_5](src/images/Vim5.png)

### Nano

![nano_3](src/images/nano3.png)
![nano_4](src/images/nano4.png)

>Для поиска и замены используем хоткей ctrl+\ ищем нужное слово/строку, затем выбираем на что сменить.

![nano_5](src/images/nano5.png)

### Mcedit

![mcedit_3](src/images/mcedit3.png)
![mcedit_4](src/images/mcedit4.png)

>При помощи F4 можно найти слово и ввести ему замену.

![mcedit_5](src/images/mcedit5.png)
 
 ## Part 8. Установка и базовая настройка сервиса **SSHD**

Используем `sudo apt install openssh-server` и устанавливаем службу ssh.  

Используем `sudo systemctl enable ssh` для того чтобы установить службу на автоматическую загрузку при включении.  

Чтобы перенастроить службу SSHd на порт 2022 для этого нам нужно отредактировать файл `/etc/ssh/sshd_config`  
![port_change](src/images/Port_2022.png)

Используем команду `ps -FC sshd`. Флаг -С позволяет фильтровать процессы по имени, -F выводит более подробное описание.
![ps](src/images/ps_sshd.png)

Используем команду netstat -tan
![netstat](src/images/netstat.png)  

Флаг *-a* выводит список всех портов (как TCP, так и UDP).  

Флаг *-t* выводит порты с протоколом TCP.  

Флаг *-n* показывает ip адрес, а не сетевое имя.

*Proto* - протокол (tcp, udp, raw), используемый сокетом.

*Recv-Q* - счётчик байт не скопированных программой пользователя из этого сокета.  

*Send-Q* - счётчик байтов, не подтверждённых удалённым узлом.  

*Local Address* - адрес и номер порта локального конца сокета.

*Foreign Address* - адрес и номер порта удалённого конца сокета.

*State* - состояние сокета.

*LISTEN* - сокет ожидает входящих подключений

*0.0.0.0* - это специальный адрес IPv4, который выполняет разные функции. В программе netstat используется запись 0.0.0.0:* которая обозначает «любой IPv4 адрес с любого порта».

## Part 9. Установка и использование утилит **top**, **htop**

### top

![output_top](src/images/top1.png)

- uptime: 55 мин
- количество авторизованных пользователей: 1
- общую загрузку системы: 0.00, 0.13, 0.32
- общее количество процессов: 113
- загрузку cpu: 0.0 us, 0.2 sy, 0.0 ni, 99.8 id, 0.0 wa, 0.0 hi, 0.0 hi, 0.0 si, 0.0 st
- загрузку памяти: 206.0
- pid процесса занимающего больше всего памяти: 4657
- pid процесса, занимающего больше всего процессорного времени: 96814

![top2](src/images/top2.png)

### htop
- Отсортированному по PID

![htop](src/images/htop_pid.png)

- Отсортированному по PERCENT_CPU

![htop](src/images/htop_cpu.png)

- Отсортированному по PERCENT_MEM

![htop](src/images/htop_mem.png)

- Отсортированному по TIME

![htop](src/images/htop_time.png)

- Отфильтрованому по sshd

![htop](src/images/htop_sshd.png)

- С процессом syslog, найденным, используя поиск и с добавленным выводом hostname, clock и uptime

![htop](src/images/htop_sys.png)

## Part 10. Использование утилиты **fdisk**

- Название жесткого диска: Disk /dev/sda
- Размер жесткого диска: 16 Gb
- Количество секторов: 33554432
- Размер swap: 2009084 (его можно уточнить отдельно вызвав команду swapon -s)

## Part 11. Использование утилиты **df** 

![df](src/images/df1.png)

Запускаем команду df для корневого раздела /

- Размер раздела - 16445308K
- Размер занятого пространства - 6213028K
- Размер свободного пространства - 9377192K
- Процент использования - 40% 

![df](src/images/df2.png)

Запускаем команду df -Th для корневого раздела /

- Размер раздела - 16G
- Размер занятого пространства - 6.0G
- Размер свободного пространства - 9.0G
- Процент использования - 40%
- Тип файловой системы для раздела - ext4

## Part 12. Использование утилиты **du**

Запускаем команду du

- Размер папок /home

![du](src/images/du_home.png)

- Размер папок в /var, 

![du](src/images/du_var.png)

- Размер папок в /var/log 

![du](src/images/du_varlog.png)

- Размер всего содержимого в /var/log/*

![du](src/images/du_varlog2.png)

## Part 13. Установка и использование утилиты **ncdu**

Устанавливаем утилиту ncdu с помощью `sudo apt install ncdu`
- Размер папки /home

![nsdu](src/images/ncdu_home.png)

- Размер папки /var

![nsdu](src/images/ncdu_var.png)

- Размер папки /var/log 

![nsdu](src/images/ncdu_log.png)

## Part 14. Работа с системными журналами

Время последней успешной авторизации

![session](src/images/last_session.png)

В /var/log/auth.log можно увидеть перезагрузку sshd после команды `sudo systemctl restart sshd.service`

![session](src/images/restart_sshd.png)

## Part 15. Использование планировщика заданий **CRON**

При помощи команды `crontab -e` вносим в запускаем команду uptime через каждые 2 минуты. Выводим на экран список текущих заданий при помощи команды `crontab -l`.

![cron](src/images/cron2.png)

Видим список задач и то что они исполняются каждые 2 минуты.

![cron](src/images/cron1.png)

Удаляем все задания из планировщика заданий командой `crontab -r`, проверяем.

![cron](src/images/cron3.png)
